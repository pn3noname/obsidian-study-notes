source: https://tryhackme.com/room/windowscommandline

---

## 1. Windows Command Line

1. Basic System Information
	1. `set`
		- MS Windows가 명령어를 실행할 경로 (`Path=`로 시작하는 줄)
			![[Pasted image 20250712142342.png]]

	2. `ver` -> Mac: `sw_vers`
		- 운영 체제 (OS) 버전 확인
			![[Pasted image 20250712144839.png]]

	3. `systeminfo` -> Mac: `system_profiler`
			![[Pasted image 20250712145003.png]]
		- OS 정보, 시스템 세부사항, 프로세서 및 메모리 등 시스템에 대한 다양한 정보

	4. `driverquery | more`
			![[Pasted image 20250712145540.png]]
		- 출력이 너무 길 경우 `more`를 통해 파이프할 수 있음 (스페이스바 버튼을 눌러 페이지별로 볼 수 있음)

2. Network Troubleshooting
	1. Network Configuration (네트워크 구성)
		- `ipconfig`를 사용하여 네트워크 정보를 확인할 수 있음
		- `ipconfig /all`을 사용하여 네트워크 구성에 대한 더 자세한 정보를 볼 수 있음 (DNS 서버를 확인하고 DHCP가 활성화되어 있는지 확인 가능)
			![[Pasted image 20250712174252.png]]

	2. Network Troubleshooting
		1. `ping target_name`
			- 일반적인 문제 해결 작업 중 하나는 서버가 인터넷상의 특정 서버에 접근할 수 있는지 확인하는 것
			- ex: `ping example.com`
			- 특정 ICMP 패킷을 보내고 응답을 기다리며, 응답이 수신되면 대상에 도달할 수 있고, 대상도 우리에게 도달할 수 있다는 것을 알 수 있음

		2. `tracert target_name`
			- trace route의 줄임말
			- ex: `tracert google.com`
			- 대상에 도달하기 위해 경유하는 네트워크 경로를 추적함
			- 경로상의 라우터들이 패킷의 TTL (Time-To-Live)이 0에 도달하여 패킷을 폐기할 때 우리에게 알려주기를 기대함
			- 명령어 입력 후, 터미널 출력에서는 목표에 도달하기 전에 n개의 라우터를 통과했음을 보여줌
				![[Pasted image 20250712175923.png]]

	3. More Networking Commands
		1. `nslookup `
			- 호스트나 도메인을 조회하여 IP주소를 반환함
			- `nslookup example.com`: 기본 네임 서버를 사용하여 example.com을 조회
			- `nslookup example.com 1.1.1.1`: 1.1.1.1 네임 서버를 사용함
				![[Pasted image 20250712180255.png]]

		2. `netstat`
			- 현재 네트워크 연결과 수신 대기 중인 포트를 표시함
			- 인수 없이 사용하는 기본 `netstat`
				![[Pasted image 20250713141123.png]]
			- 위의 예의 경우, SSH 연결이 하나만 있으며, 포트 22에 바인딩되어 있어 SSH임을 알 수 있음
			- 다른 옵션들:
				- `netstat -h`: 도움말 페이지
				- `netstat -a`: 모든 설정된 연결과 수신 대기 중인 포트 표시
				- `netstat -b`: 각 수신 대기 포트 및 설정된 연결과 연관된 프로그램을 표시
				- `netstat -o`: 연결과 연관된 프로세스 ID (PID)를 표시
				- `netstat -n`: 주소와 포트 번호에 대해 숫자 형식을 사용
			- ex:
				![[Pasted image 20250713141752.png]]
				- 위의 예의 첫 번째 줄에서 보여주는 것처럼 실팽 파일 `sshd.exe`가 포트 22에서 들어오는 연결을 수신 대기하는 역할을 담당
				- 각 연결과 연관된 프로세스 ID (PID)도 확인 가능

> [!INFO]
> ### DHCP (Dynamic Host Configuration Protocol)
> - 네트워크에 연결된 장치들에게 자동으로 IP 주소와 네트워크 설정을 배정해주는 프로토콜
> #### 1.DHCP의 역할
> - 자동 IP 주소 할당: 컴퓨터, 스마트폰, 태블릿 등이 네트워크에 연결될 때 자동으로 사용 가능한 IP 주소를 찾아서 할당해 줌
> - 네트워크 설정 제공: IP 주소 외에도 서브넷 마스크, 게이트웨이 주소, DNS 서버 주소 등 네트워크에 접속하기 위해 필요한 모든 정보를 함께 제공함
> - IP 주소 관리: 사용하지 않는 IP 주소를 회수하고 재사용할 수 있도록 관리함
> #### 2. 쉬운 비유
> - DHCP를 호텔의 프런트 데스크에 비유할 수 있음. 손님(장치)이 호텔(네트워크)에 도착하면, 프런트 데스크 직원(DHCP 서버)이 빈 방(IP 주소)을 찾아서 열쇠와 함께 호텔 이용 안내서(네트워크 설정)를 제공해줌. 손님이 체크아웃하면 그 방은 다시 다른 손님이 사용할 수 있게 됨
> #### 3. DHCP가 없다면?
> - DHCP가 없다면 네트워크 관리자가 모든 장치에 수동으로 IP 주소를 설정해야 하고, IP 주소 충돌을 방지하기 위해 어떤 주소가 사용 중인지 계속 추적함 (이는 매우 번거롭고 실수가 발생하기 쉬운 작업)
> - 일반적으로 가정용 공유기나 회사의 네트워크 장비에 DHCP 서버 기능이 내장되어 있어서, 우리가 와이파이에 연결할 때 자동으로 인터넷을 사용할 수 있는 것

> [!INFO]
> ### ICMP (Internet Control Message Protocol)
> - 네트워크에서 오류나 상태 정보를 전달하는 프로토콜
> #### 1. ICMP의 기본 개념
> - ICMP는 IP 프로토콜의 보조 역할을 하는 프로토콜
> - 데이터 전송 자체보다는 네트워크 상태를 점검하고 문제를 알려주는 역할을 함
> - 마치 우편 시스템에서 "배달 불가" 스티커를 붙여 돌려보내는 것과 비슷함
> #### 2. 주요 역할
> - 오류 메시지 전달: 패킷이 목적지에 도달할 수 없거나, 전송 중 문제가 생겼을 때 송신자에게 알려줌. 예를 들어 "목적지에 도달할 수 없음", "시간 초과", "포트가 닫혀있음" 같은 정보를 전달
> - 네트워크 진단: ping 명령어가 대표적인 예시. ping은 ICMP Echo Request를 보내고 Echo Reply를 받아서 네트워크 연결 상태와 응답 시간을 확인함
> - 경로 추적: traceroute 명령어에서 사용되어 패킷이 목적지까지 어떤 경로를 거쳐가는지 확인할 수 있음
> #### 3. 실생활 비유
> - ICMP를 우편 시스템에 비유하면, 편지(데이터 패킷)를 보낼 때 우체국(라우터)에서 "주소 불명으로 배달 불가", "수신인 부재" 같은 메모를 붙여 돌려보내는 것과 같음
> - 또한 "잘 도착했는지 확인해줘"라고 요청하면 "잘 받았어"라고 답장을 보내주는 역할도 함
> - ICMP는 네트워크 관리자가 네트워크 문제를 진단하고 해결하는 데 필수적인 도구이며, 일반 사용자도 인터넷 연결 상태를 확인할 때 간접적으로 사용하게 됨













